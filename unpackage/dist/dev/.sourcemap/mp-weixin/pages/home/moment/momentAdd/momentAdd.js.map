{"version":3,"sources":["uni-app:///main.js","webpack:///D:/learning/SpringBoot/graduation_project_02/campus-express/pages/home/moment/momentAdd/momentAdd.vue?a50f","webpack:///D:/learning/SpringBoot/graduation_project_02/campus-express/pages/home/moment/momentAdd/momentAdd.vue?449c","webpack:///D:/learning/SpringBoot/graduation_project_02/campus-express/pages/home/moment/momentAdd/momentAdd.vue?00d6","webpack:///D:/learning/SpringBoot/graduation_project_02/campus-express/pages/home/moment/momentAdd/momentAdd.vue?3647","uni-app:///pages/home/moment/momentAdd/momentAdd.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","imgList","modalName","textareaValue","paths","onNavigationBarButtonTap","methods","add","save","console","uploadFile","chooseImage","uni","count","sizeType","success","viewImage","urls","current","delImg","icon","that","textareaInput"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC2L;AAC3L,gBAAgB,yLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAA8tB,CAAgB,+qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgClvB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;MACA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACAC;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IAEA;IAEAC;MAAA;MACAC;QACAC;QACAC;QACAC;UACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACAJ;QACAK;QACAC;MACA;IACA;IACAC;MACA;MACA;QACAC;MACA;QACAC;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B","file":"pages/home/moment/momentAdd/momentAdd.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home/moment/momentAdd/momentAdd.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./momentAdd.vue?vue&type=template&id=980b44aa&\"\nvar renderjs\nimport script from \"./momentAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./momentAdd.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/moment/momentAdd/momentAdd.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./momentAdd.vue?vue&type=template&id=980b44aa&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.imgList.length\n  var g1 = _vm.imgList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./momentAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./momentAdd.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<form>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<textarea maxlength=\"-1\" :disabled=\"modalName != null\" @input=\"textareaInput\" placeholder=\"此刻的心情...\"></textarea>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-bar bg-white margin-top\">\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t图片上传\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t{{ imgList.length }}/9\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"grid col-3 grid-square flex-sub\">\r\n\t\t\t\t\t<view class=\"bg-img\" v-for=\"(item, index) in imgList\" :key=\"index\" @tap=\"viewImage\" :data-url=\"imgList[index]\">\r\n\t\t\t\t\t\t<image :src=\"imgList[index]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"cu-tag bg-red\" @tap.stop=\"delImg\" :data-index=\"index\">\r\n\t\t\t\t\t\t\t<text class='cuIcon-close'></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"solids\" @tap=\"chooseImage\" v-if=\"imgList.length < 9\">\r\n\t\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</form>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timgList: [],\r\n\t\t\tmodalName: null,\r\n\t\t\ttextareaValue: '',\r\n\t\t\tpaths: []\r\n\t\t}\r\n\t},\r\n\tonNavigationBarButtonTap() {\r\n\t\tthis.add()\r\n\t},\r\n\tmethods: {\r\n\t\t// 点击发表\r\n\t\tadd() {\r\n\t\t\tif (this.imgList.length > 9) {\r\n\t\t\t\tthis.vusui.alert('图片不能超过9张')\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tif (this.textareaValue == '' && this.imgList.length == 0) {\r\n\t\t\t\tthis.vusui.alert('请输入心情或至少传一张图片')\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t// 如果没有图片直接保存\r\n\t\t\tif (this.imgList.length == 0) {\r\n\t\t\t\tthis.save()\r\n\t\t\t} else {\r\n\t\t\t\t// 如果有图片，先上传图片\t\r\n\t\t\t\tthis.uploadFile()\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 提交保存\r\n\t\tsave() {\r\n\t\t\tconsole.log(\"保存成功\");\r\n\t\t},\r\n\r\n\t\t// 上传图片\r\n\t\tuploadFile() {\r\n\t\t\tvar that = this\r\n\t\t\tthis.vusui.load(3)\r\n\t\t\t// 循环上传图片\r\n\t\t\tfor (var i = 0; i < this.imgList.length; i++) {\r\n\t\t\t\tconst tempFilePath = this.imgList[i];\r\n\t\t\t\t// 图片上传\r\n\t\t\t\t// uni.uploadFile({\r\n\t\t\t\t// \turl: 'ceshi'\r\n\t\t\t\t// \tfilePath: tempFilePath,\r\n\t\t\t\t// \tname: 'file',\r\n\t\t\t\t// \tsuccess: (r) => {\r\n\t\t\t\t// \t\tvar res = JSON.parse(r.data)\r\n\t\t\t\t// \t\tvar path = res.data.path\r\n\t\t\t\t// \t\tthat.paths.push(path)\r\n\t\t\t\t// \t\tif(this.paths.length == this.imgList.length){\r\n\t\t\t\t// \t\t\tthis.save()\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tchooseImage() {\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 9,\r\n\t\t\t\tsizeType: ['original', 'compressed'],\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (this.imgList.length != 0) {\r\n\t\t\t\t\t\tthis.imgList = this.imgList.concat(res.tempFilePaths)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.imgList = res.tempFilePaths\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tviewImage(e) {\r\n\t\t\tuni.previewImage({\r\n\t\t\t\turls: this.imgList,\r\n\t\t\t\tcurrent: e.currentTarget.dataset.url\r\n\t\t\t});\r\n\t\t},\r\n\t\tdelImg(e) {\r\n\t\t\tvar that = this\r\n\t\t\tthis.vusui.confirm('您确定要删除这张照片吗？', {\r\n\t\t\t\ticon: 2\r\n\t\t\t}, function () {\r\n\t\t\t\tthat.imgList.splice(e.currentTarget.dataset.index, 1)\r\n\t\t\t})\r\n\t\t},\r\n\t\ttextareaInput(e) {\r\n\t\t\tthis.textareaValue = e.detail.value\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"],"sourceRoot":""}